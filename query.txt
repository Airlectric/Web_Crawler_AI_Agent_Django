{% extends 'base.html' %}
{% block content %}
<div class="container-fluid min-vh-100 bg-galaxy">
    <div class="container py-5">
        <div class="glass-header neon-glow text-center mb-5">
            <h2 class="neon-text"><i class="fas fa-file-alt fa-beat"></i> File Management Console</h2>
            <p class="lead text-light">Manage crawling source files and outputs</p>
        </div>

        <div class="row g-4">
            {% for filename, content in file_content.items %}
            <div class="col-xl-4 col-lg-6 col-md-6 col-sm-12">
                <div class="glass-card hover-transform h-100 d-flex flex-column justify-content-between">
                    <div class="card-body d-flex flex-column">
                        <div class="file-header mb-4">
                            <div class="icon-circle-sm bg-{{ filename|cut:'.txt' }}">
                                <i class="fas 
                                    {% if 'universities' in filename %}fa-university
                                    {% elif 'potential' in filename %}fa-folder-tree
                                    {% else %}fa-link{% endif %}"></i>
                            </div>
                            <h4 class="neon-text-accent">{{ filename }}</h4>
                        </div>

                        <form method="post" class="file-editor mt-auto">
                            {% csrf_token %}
                            <input type="hidden" name="filename" value="{{ filename }}">
                            <div class="form-group">
                                <div class="code-editor" data-filename="{{ filename }}">
                                    <textarea name="content" class="form-control glass-input{% if filename == 'urls.txt' %} disabled{% endif %}" 
                                        rows="12" {% if filename == 'urls.txt' %}readonly{% endif %}>{{ content }}</textarea>
                                </div>
                                {% if filename != 'urls.txt' %}
                                <button type="submit" class="btn btn-glow btn-save mt-3">
                                    <i class="fas fa-cloud-upload-alt"></i> Commit Changes
                                </button>
                                {% endif %}
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>






def files(request):
    if request.method == 'POST':
        filename = request.POST.get('filename')
        content = request.POST.get('content')
        if filename != 'urls.txt':
            with open(os.path.join(DATA_DIR, filename), 'w', encoding='utf-8') as f:
                f.write(content)
        return redirect('files')
    
    file_content = {}
    for filename in ['universities.txt', 'potential_directories.txt', 'urls.txt']:
        file_path = os.path.join(DATA_DIR, filename)
        try:
            with open(file_path, 'r', encoding='utf-8') as f:
                file_content[filename] = f.read()
        except FileNotFoundError:
            file_content[filename] = ''
        except UnicodeDecodeError:
            with open(file_path, 'r', encoding='utf-8', errors='replace') as f:
                file_content[filename] = f.read()
            logger.warning(f"{filename} contained undecodable characters, replaced with placeholders")
    return render(request, 'files.html', {'file_content': file_content})



I DONT WANT THE INDIVIDUAL TO MANUALLLY PARSE THE URL ENTERED IN THE POTENTIAL DIRECTORIES .TXT FILE FOR THE DOMAINS TO ENTER INTO THE UNIVERSITIES.TXT but rather that should be done automatically